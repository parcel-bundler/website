# ✨ Робота в продакшені

Коли прийде час випустити вашу програму в продакшн, використовуйте режим `production`.

```Bash
parcel build entry.js
```

## Оптимізації

Це відключає режим перегляду, гарячу заміну модулів, ваш додаток буде зібрано лише один раз і дозволяє мінімізувати всі вихідні бандли для зменшення розміру файлу. Мініфікатори, використовувані Parcel: [terser](https://github.com/fabiosantoscode/terser) для JavaScript, [cssnano](http://cssnano.co) для CSS і [htmlnano](https://github.com/posthtml/htmlnano) для HTML.

Включення режиму продакшена також встановлює змінну середовища `NODE_ENV = production`. Великі бібліотеки, такі як React, мають тільки функціональність для налагодження, яка відключається через цю змінну середовища, що призводить до менших і швидших збірок для продакшена.

## Стратегія іменування файлів

Щоб дозволити встановити дуже агресивні правила кешування для вашого cdn, для оптимальної продуктивності та ефективності, Parcel хешує імена файлів більшості бандлів (залежно від того, чи має цей пакет розпізнане/запам'ятовне ім'я чи ні, головним чином для SEO).

Parcel слідує за наведеною нижче таблицею, коли мова йде про імена бандлів. (Вхідні точки ніколи не хешуються)

|                    Тип бандлу | Тип                | Вміст хешується |
| ----------------------------: | ------------------ | :-------------: |
|                           Any | Entrypoint         |       ❌        |
|                    JavaScript | `<script>`         |       ✅        |
|                    JavaScript | Dynamic import     |       ❌        |
|                    JavaScript | Service worker     |       ❌        |
|                          HTML | iframe             |       ❌        |
|                          HTML | anchor link        |       ❌        |
| Raw (Images, text files, ...) | Import/Require/... |       ✅        |

Хеш файлу слід виконати наступний шаблон іменування: `<directory name>-<hash>.<extension>`

## Кроссплатформність

Прагнучи оптимізувати продуктивність продакшену, Parcel спробує визначити кількість процесорів, доступних на машині, що працює по команді build, щоб вона могла відповідно розподіляти роботу. Для цього Parcel покладається на бібліотеку [physical-CPU-count](https://www.npmjs.com/package/physical-cpu-count).

Майте на увазі, що цей модуль передбачає наявність у вашій системі програми [`lscpu`](http://manpages.courier-mta.org/htmlman1/lscpu.1.html).
