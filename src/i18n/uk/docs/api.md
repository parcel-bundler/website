# üìö API

## Bundler

–ó–∞–º—ñ—Å—Ç—å CLI –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ API –¥–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –ø–∞–∫—É–≤–∞–ª—å–Ω–∏–∫–∞ –¥–ª—è –±—ñ–ª—å—à –ø—Ä–æ—Å—É–Ω—É—Ç–∏—Ö –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –æ–±—Ä–æ–±–∫–∞ –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –∑–±—ñ—Ä–∫–∏).
–î–∏–≤. –ü—Ä–∏–∫–ª–∞–¥ –Ω–∏–∂—á–µ, –¥–µ –ø–æ—è—Å–Ω—é—î—Ç—å—Å—è –∫–æ–∂–Ω–∞ –æ–ø—Ü—ñ—è:

```Javascript
const Bundler = require('parcel-bundler');
const Path = require('path');

// –®–ª—è—Ö –¥–æ —Ñ–∞–π–ª—É —Ç–æ—á–∫–∏ –≤—Ö–æ–¥—É
const file = Path.join(__dirname, './index.html');

// –û–ø—Ü—ñ—ó –ø–∞–∫—É–≤–∞–ª—å–Ω–∏–∫–∞ (Bundler)
const options = {
¬†¬†outDir: './dist', // –ö–∞—Ç–∞–ª–æ–≥ –¥–ª—è —Ñ–∞–π–ª—ñ–≤ –∑–±—ñ—Ä–∫–∏, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º - dist
¬†¬†outFile: 'index.html', // –Ü–º'—è –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É
¬†¬†publicUrl: './', // –®–ª—è—Ö, —è–∫–∏–π –æ–±—Å–ª—É–≥–æ–≤—É—î —Å–µ—Ä–≤–µ—Ä, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º - '/'
¬†¬†watch: true, // —á–∏ —Å–ª—ñ–¥ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–∏ —Ñ–∞–π–ª—ñ–≤ —ñ –∑–±–∏—Ä–∞—Ç–∏ –∑–∞–Ω–æ–≤–æ —ó—Ö –ø—Ä–∏ –∑–º—ñ–Ω—ñ, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º - process.env.NODE_ENV! == 'production'
¬†¬†cache: true, // –í–∫–ª—é—á–∞—î –∞–±–æ –≤—ñ–¥–∫–ª—é—á–∞—î –∫–µ—à—É–≤–∞–Ω–Ω—è, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º - true
¬†¬†cacheDir: '.cache', // –ö–∞—Ç–∞–ª–æ–≥ –∫–µ—à—É–≤–∞–Ω–Ω—è, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º .cache
¬†¬†minify: false, // –ú—ñ–Ω—ñ—Ñ—ñ–∫—É–≤–∞—Ç–∏ —Ñ–∞–π–ª–∏, –≤–∫–ª—é—á–µ–Ω–æ —è–∫—â–æ process.env.NODE_ENV === 'production'
¬†¬†target: 'browser', // browser / node / electron, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º - browser
¬†¬†https: false, // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–∞—Ö–∏—â–µ–Ω–µ –∑'—î–¥–Ω–∞–Ω–Ω—è (https) –¥–ª—è —Ñ–∞–π–ª—ñ–≤, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º - false
¬†¬†logLevel: 3, // 3 = –õ–æ–≥—É–≤–∞—Ç–∏ –≤—Å–µ, 2 = –õ–æ–≥—É–≤–∞—Ç–∏ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è —ñ –ø–æ–º–∏–ª–∫–∏, 1 = –õ–æ–≥—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏
¬†¬†hmrPort: 0, // –ü–æ—Ä—Ç –Ω–∞ —è–∫–æ–º—É –ø—Ä–∞—Ü—é—î —Å–æ–∫–µ—Ç hmr, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º - –≤–∏–ø–∞–¥–∫–æ–≤–∏–π –≤—ñ–ª—å–Ω–∏–π –ø–æ—Ä—Ç (0 –≤ node.js –≤–∏–∑–Ω–∞—á–∞—î –≤–∏–ø–∞–¥–∫–æ–≤–∏–π –≤—ñ–ª—å–Ω–∏–π –ø–æ—Ä—Ç)
¬†¬†sourceMaps: true, // –í–∫–ª—é—á–∏—Ç–∏ –∞–±–æ –≤—ñ–¥–∫–ª—é—á–∏—Ç–∏ sourcemaps, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∫–ª—é—á–µ–Ω–æ (–ø–æ–∫–∏ —â–µ –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –≤ –º—ñ–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏—Ö –∑–±—ñ—Ä–∫–∞—Ö)
¬†¬†hmrHostname: '', // –Ü–º'—è —Ö–æ—Å—Ç–∞ –¥–ª—è –º–æ–¥—É–ª—è –≥–∞—Ä—è—á–æ–≥–æ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º - ''
¬†¬†detailedReport: false // –†–æ–∑–¥—Ä—É–∫–æ–≤—É—î –¥–æ–∫–ª–∞–¥–Ω–∏–π –∑–≤—ñ—Ç –ø—Ä–æ –±–∞–Ω–¥–ª, —Ä–µ—Å—É—Ä—Å–∏, —Ä–æ–∑–º—ñ—Ä–∏ —Ñ–∞–π–ª—ñ–≤ —ñ —á–∞—Å—É, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º - false, –∑–≤—ñ—Ç–∏ —Ä–æ–∑–¥—Ä—É–∫–æ–≤—É—é—Ç—å—Å—è, —è–∫—â–æ watch –≤—ñ–¥–∫–ª—é—á–µ–Ω–∏–π
};

async runBundle () {
¬†¬†// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–∞–∫—É–≤–∞–ª—å–Ω–∏–∫–∞, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ä–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è —Ç–æ—á–∫–∏ –≤—Ö–æ–¥—É —ñ –Ω–∞–¥–∞–Ω—ñ –æ–ø—Ü—ñ—ó
¬†¬†const bundler = new Bundler (file, options);

¬†¬†// –ó–∞–ø—É—Å–∫–∞—î –ø–∞–∫—É–≤–∞–ª—å–Ω–∏–∫ —ñ –ø–æ–≤–µ—Ä—Ç–∞—î –≥–æ–ª–æ–≤–Ω—É –∑–±—ñ—Ä–∫—É
¬†¬†// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–æ–¥—ñ—ó, —è–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ —Ä–µ–∂–∏–º watch, –æ—Å–∫—ñ–ª—å–∫–∏ —Ü–µ–π –ø—Ä–æ–º—ñ—Å –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑, –∞ –Ω–µ –ø—Ä–∏ –∫–æ–∂–Ω—ñ–π –ø–µ—Ä–µ–∑–±—ñ—Ä—Ü—ñ
¬†¬†const bundle = await bundler.bundle ();
}

runBundle();
```

### –ü–æ–¥—ñ—ó

–°–ø–∏—Å–æ–∫ —É—Å—ñ—Ö –ø–æ–¥—ñ–π –ø–∞–∫—É–≤–∞–ª—å–Ω–∏–∫–∞

- `Bundled` –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ Parcel —É—Å–ø—ñ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–≤ –∑–±—ñ—Ä–∫—É, –æ—Å–Ω–æ–≤–Ω–∏–π [–±–∞–Ω–¥–ª](#bundle) –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ –∫–æ–ª–ª–±–µ–∫

```Javascript
const bundler = new Bundler (...);
bundler.on ('bundled', (bundle) => {
¬†¬† // –ø–∞–∫—É–≤–∞–ª—å–Ω–∏–∫ –º—ñ—Å—Ç–∏—Ç—å –≤—Å—ñ —Ä–µ—Å—É—Ä—Å–∏ —ñ –±–∞–Ω–¥–ª–∏, –ø–æ–¥—Ä–æ–±–∏—Ü—ñ –¥–∏–≤—ñ—Ç—å—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
});
```

- `BuildEnd` –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –∑–±—ñ—Ä–∫–∏, –≤—ñ–Ω —Ç–∞–∫–æ–∂ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –≤ —Ä–∞–∑—ñ –ø–æ–º–∏–ª–∫–∏

```Javascript
const bundler = new Bundler (...);
bundler.on ('buildEnd', () => {
¬†¬† // –ó—Ä–æ–±–∏—Ç–∏ —â–æ—Å—å
});
```

### Bundle

`Bundle` - —Ü–µ —Ç–µ, —â–æ Parcel –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–∞–Ω–¥–ª–∞ –∑ —Ä–µ—Å—É—Ä—Å—ñ–≤, –≤—ñ–Ω —Ç–∞–∫–æ–∂ –º—ñ—Å—Ç–∏—Ç—å –¥–æ—á—ñ—Ä–Ω—ñ —ñ —Ä–æ–¥–∏–Ω–Ω—ñ –±–∞–Ω–¥–ª–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–µ—Ä–µ–≤–∞ –±–∞–Ω–¥–ª—ñ–≤.

#### Properties

- `Type`: –¢–∏–ø —Ä–µ—Å—É—Ä—Å—ñ–≤, —è–∫—ñ –≤—ñ–Ω –º—ñ—Å—Ç–∏—Ç—å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, js, css, map, ...)
- `Name`: –Ü–º'—è –±–∞–Ω–¥–ª–∞ (–∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é` Asset.generateBundleName () `` entryAsset `)
- `ParentBundle`: –ë–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –±–∞–Ω–¥–ª, null –≤ —Ä–∞–∑—ñ –≤—Ö—ñ–¥–Ω–æ–≥–æ –±–∞–Ω–¥–ª–∞
- `EntryAsset`: –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É –±–∞–Ω–¥–ª–∞, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —ñ–º–µ–Ω—ñ –∑–±—ñ—Ä–∫–∏ —Ä–µ—Å—É—Ä—Å—ñ–≤.
- `Assets`: –ù–∞–±—ñ—Ä (`Set`) –≤—Å—ñ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –±–∞–Ω–¥–ª–∞
- `ChildBundles`: –ù–∞–±—ñ—Ä (`Set`) –≤—Å—ñ—Ö –¥–æ—á—ñ—Ä–Ω—ñ—Ö –±–∞–Ω–¥–ª—ñ–≤
- `SiblingBundles`: –ù–∞–±—ñ—Ä (`Set`) –≤—Å—ñ—Ö —Å–ø–æ—Ä—ñ–¥–Ω–µ–Ω–∏—Ö –±–∞–Ω–¥–ª—ñ–≤
- `SiblingBundlesMap`: –ö–∞—Ä—Ç–∞ (`Map <String (Type: js, css, map, ...), Bundle>`) –≤—Å—ñ—Ö –¥–æ—á—ñ—Ä–Ω—ñ—Ö –±–∞–Ω–¥–ª—ñ–≤
- `Offsets`: –ö–∞—Ä—Ç–∞ (`Map <Asset, number (line number inside the bundle)>`) –≤—Å—ñ—Ö –º—ñ—Å—Ü—å —Ä–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –±–∞–Ω–¥–ª–∞, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω–∏—Ö –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤—Å—ñ—Ö —Ç–æ—á–Ω–∏—Ö source maps

#### Tree

–ë–∞–Ω–¥–ª (`Bundle`) –º—ñ—Å—Ç–∏—Ç—å –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –±–∞–Ω–¥–ª (`parentBundle`), –¥–æ—á—ñ—Ä–Ω—ñ–π –±–∞–Ω–¥–ª (`childBundles`) —ñ —Å–ø–æ—Ä—ñ–¥–Ω–µ–Ω–∏–π –±–∞–Ω–¥–ª (`siblingBundles`), –≤—Å—ñ —Ü—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ —Ä–∞–∑–æ–º —Å—Ç–≤–æ—Ä—é—é—Ç—å —à–≤–∏–¥–∫–µ –¥–µ—Ä–µ—Ä–≤–æ –±–∞–Ω–¥–ª—ñ–≤ –¥–ª—è —ñ—Ç–µ—Ä–∞—Ü—ñ—ó.

–î—É–∂–µ –ø—Ä–æ—Å—Ç–∏–π –ø—Ä–∏–∫–ª–∞–¥ –¥–µ—Ä–µ–≤–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤ —ñ –π–æ–≥–æ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞ –±–∞–Ω–¥–ª—ñ–≤

##### –î–µ—Ä–µ–≤–æ —Ä–µ—Å—É—Ä—Å—ñ–≤:

`index.html` –ø–æ—Ç—Ä–µ–±—É—î `index.js` —ñ `index.css`.

`index.js` –ø–æ—Ç—Ä–µ–±—É—î `test.js` —ñ `test.txt`

```Text
index.html
-- index.js
 |--- test.js
 |--- test.txt
-- index.css
```

##### Bundle Tree:

`Index.html` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ –≤—Ö—ñ–¥–Ω–∏–π —Ä–µ—Å—É—Ä—Å –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–∞–Ω–¥–ª–∞, —Ü–µ–π –æ—Å–Ω–æ–≤–Ω–∏–π –±–∞–Ω–¥–ª —Å—Ç–≤–æ—Ä—é—î –¥–≤–∞ –¥–æ—á—ñ—Ä–Ω—ñ –±–∞–Ω–¥–ª–∏: –æ–¥–∏–Ω –¥–ª—è`index.js` —ñ –¥—Ä—É–≥–∏–π –¥–ª—è `index.css`, —Ç–æ–º—É —â–æ –æ–±–∏–¥–≤–∞ –≤–æ–Ω–∏ –≤—ñ–¥—Ä—ñ–∑–Ω—è—é—Ç—å—Å—è –≤—ñ–¥ —Ç–∏–ø—É`html`.

`Index.js` –≤–∏–º–∞–≥–∞—î –¥–≤–∞ —Ñ–∞–π–ª–∏,`test.js` —ñ `test.txt`.

`Test.js` –¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ —Ä–µ—Å—É—Ä—Å—ñ–≤ –±–∞–Ω–¥–ª–∞`index.js`, –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –º–∞—î —Ç–æ–π –∂–µ —Ç–∏–ø, —â–æ —ñ `index.js`

`Test.txt` —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π –±–∞–Ω–¥–ª —ñ –¥–æ–¥–∞—î—Ç—å—Å—è —è–∫ –¥–æ—á—ñ—Ä–Ω—ñ–π –±–∞–Ω–¥–ª`index.js`, –æ—Å–∫—ñ–ª—å–∫–∏ —Ü–µ —ñ–Ω—à–∏–π —Ç–∏–ø —Ä–µ—Å—É—Ä—Å—É, –Ω—ñ–∂ `index.js`

`Index.css` –Ω—ñ—á–æ–≥–æ –Ω–µ –≤–∏–º–∞–≥–∞—î, –æ—Ç–∂–µ, –º—ñ—Å—Ç–∏—Ç—å —Ç—ñ–ª—å–∫–∏ –≤—Ö—ñ–¥–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏.

`Index.css` —ñ`index.js` - —Å–ø–æ—Ä—ñ–¥–Ω–µ–Ω—ñ –±–∞–Ω–¥–ª–∏ –¥–ª—è –æ–¥–∏–Ω –æ–¥–Ω–æ–≥–æ, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ –º–∞—é—Ç—å –æ–¥–∏–Ω —ñ —Ç–æ–π –∂–µ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –µ–ª–µ–º–µ–Ω—Ç.

```Text
index.html
-- index.js (–≤–∫–ª—é—á–∞—î index.js —ñ test.js)
 |--- test.txt (–≤–∫–ª—é—á–∞—î test.txt)
-- index.css (–≤–∫–ª—é—á–∞—î index.css)
```

### –ú—ñ–¥–ª–≤–∞—Ä

–ú—ñ–¥–ª–≤–∞—Ä (middleware) –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ HTTP-—Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `express` –∞–±–æ node`http`).

–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º—ñ–¥–ª–≤–∞—Ä Parcel –∑ express

```Javascript
const Bundler = require ( 'parcel-bundler');
const app = require ( 'express') ();

const file = 'index.html'; // –ü–µ—Ä–µ–¥–∞–π—Ç–µ –∞–±—Å–æ–ª—é—Ç–Ω–∏–π —à–ª—è—Ö –¥–æ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥—É —Ç—É—Ç
const options = {}; // –î–∏–≤. –†–æ–∑–¥—ñ–ª –æ–ø—Ü—ñ–π API, –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π

// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –ø–∞–∫—É–≤–∞–ª—å–Ω–∏–∫–∞ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —Ñ–∞–π–ª—É —ñ –æ–ø—Ü—ñ–π
const bundler = new Bundler (file, options);

// –®–ª—è—Ö express –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º—ñ–¥–ª–≤–∞—Ä –ø–∞–∫—É–≤–∞–ª—å–Ω–∏–∫–∞, —Ü–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å Parcel –æ–±—Ä–æ–±–ª—è—Ç–∏ –∫–æ–∂–µ–Ω –∑–∞–ø–∏—Ç –¥–æ –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ express
app.use (bundler.middleware ());

// –°–µ—Ä–≤–µ—Ä –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É—î –ø–æ—Ä—Ç 8080
app.listen (8080);
```
