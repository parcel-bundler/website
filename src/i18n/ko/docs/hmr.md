# ğŸ”¥ ë¹ ë¥¸ ëª¨ë“ˆ êµì²´(HMR)

ë¹ ë¥¸ ëª¨ë“ˆ êµì²´(Hot Module Replacement)(ì´í•˜ HMR)ëŠ” ëŸ°íƒ€ì„ì— í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì—†ì´ ëª¨ë“ˆì„ ìë™ìœ¼ë¡œ ê°±ì‹ í•˜ë¯€ë¡œ ê°œë°œ ê²½í—˜ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤. ì‘ì€ ë³€í™”ì— ë”°ë¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœë¥¼ ê³„ì† ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Parcel HMR ì€ JavaScript ì™€ CSS ì• ì…‹ ëª¨ë‘ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. í”„ë¡œë•ì…˜ ëª¨ë“œì—ì„œ HMR ì€ ìë™ìœ¼ë¡œ ë¹„í™œì„±í™” ë©ë‹ˆë‹¤.

íŒŒì¼ì„ ì €ì¥í•˜ë©´ Parcel ì€ ë³€í•œ ë¶€ë¶„ì„ ë‹¤ì‹œ ë¹Œë“œí•˜ê³  ì´ì— ì˜í–¥ì„ ë°›ëŠ” ëª¨ë“  ì‹¤í–‰ì¤‘ì¸ í´ë¼ì´ì–¸íŠ¸ì— ìƒˆ ì½”ë“œë¥¼ ë³´ëƒ…ë‹ˆë‹¤. ê·¸ í›„ ìƒˆ ì½”ë“œëŠ” ì´ì „ ë²„ì „ê³¼ êµì²´ë˜ê³  ëª¨ë“  ë¶€ëª¨ê°€ í•¨ê»˜ ë‹¤ì‹œ í‰ê°€ ë©ë‹ˆë‹¤. ì´ ê³¼ì • ì¤‘ `module.hot` API ë¥¼ ì‚¬ìš©í•´ í›…(hook)ì„ ê±¸ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ëª¨ë“ˆì´ ë²„ë ¤ì§ˆ ë•Œ, ë˜ëŠ” ìƒˆ ë²„ì „ì´ ë“¤ì–´ì˜¬ ë•Œ ì½”ë“œì— ì•Œë ¤ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. [react-hot-loader](https://github.com/gaearon/react-hot-loader)ê°™ì€ í”„ë¡œì íŠ¸ëŠ” ì´ ê³¼ì •ì— ë„ì›€ì´ ë˜ë©°, Parcel ì— ë°”ë¡œ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`module.hot.accept` ì™€ `module.hot.dispose` ë‘ ë©”ì†Œë“œë¥¼ ì•Œì•„ ë‘ì„¸ìš”. `module.hot.accept`ë¥¼ ì´ ëª¨ë“ˆì´ë‚˜ ì´ ëª¨ë“ˆì˜ ë‹¤ë¥¸ ì˜ì¡´ ì‚¬í•­ì´ ê°±ì‹ ë  ë•Œ ì‹¤í–‰ë˜ëŠ” ì½œë°±ê³¼ í•¨ê»˜ í˜¸ì¶œí•©ë‹ˆë‹¤. `module.hot.dispose`ëŠ” ì´ ëª¨ë“ˆì´ êµì²´ë  ë•Œ í˜¸ì¶œë˜ëŠ” ì½œë°±ì„ ë°›ì•„ë“¤ì…ë‹ˆë‹¤.

```javascript
if (module.hot) {
  module.hot.dispose(function() {
    // ëª¨ë“ˆì´ ê³§ íê¸° ë¨
  })

  module.hot.accept(function() {
    // ëª¨ë“ˆì´ë‚˜ ëª¨ë“ˆì˜ ì˜ì¡´ ì‚¬í•­ì´ ê³§ ê°±ì‹  ë¨
  })
}
```

## ì˜ì¡´ì„± ìë™ì„¤ì¹˜

Parcel ì€ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ê°€ í•„ìš”í• ë•Œë§ˆë‹¤ `node_module`ì—ì„œ ë§ëŠ” ì˜ì¡´ì„±ì„ ì°¾ê³ , ë§Œì•½ ì°¾ì§€ ëª»í•˜ë©´ ìë™ìœ¼ë¡œ `yarn`ì´ë‚˜ `npm`ì„ ì´ìš©í•´ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.(`yarn.lock` íŒŒì¼ì´ ìˆëŠ”ì§€ ì—¬ë¶€ë¡œ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ê²°ì •) ì´ ê¸°ëŠ¥ì€ ê°œë°œìë¡œ í•˜ì—¬ê¸ˆ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ì„¤ì¹˜ë¥¼ ìœ„í•´ Parcel ì„ ë§¤ë²ˆ ì¢…ë£Œí•˜ê±°ë‚˜ ì—¬ëŸ¬ê°œì˜ í„°ë¯¸ë„ì„ ë„ìš°ì§€ ì•Šì•„ë„ ë˜ê²Œ í•´ì¤ë‹ˆë‹¤.

ì´ ê¸°ëŠ¥ì€ ì˜¤ì§ _ê°œë°œëª¨ë“œ_([`serve`](cli.md#serve) í˜¹ì€ [`watch`](cli.md#watch) ëª…ë ¹ì–´ ì‚¬ìš©ì‹œ)ì—ì„œë§Œ ë™ì‘í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ í”„ë¡œë•ì…˜ëª¨ë“œ([`build`](cli.md#build) ëª…ë ¹ì–´)ì—ì„  ë°°í¬ë„ì¤‘ ë°œìƒí•˜ëŠ” ì›ì¹˜ì•ŠëŠ” ë¶€ì‘ìš©ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ìë™ì„¤ì¹˜ê°€ ë¹„í™œì„±í™” ë©ë‹ˆë‹¤.

ì´ ê¸°ëŠ¥ì€ [`--no-autoinstall`](cli.md#disable-autoinstall) ì˜µì…˜ìœ¼ë¡œ ë¹„í™œì„±í™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Safe Write

ì¼ë¶€ í…ìŠ¤íŠ¸ í¸ì§‘ê¸°ì™€ IDE ëŠ” `safe write`ë¼ê³  ë¶€ë¥´ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ íŒŒì¼ì„ ë³µì œí•œ ë‹¤ìŒ ì €ì¥í•  ë•Œ ì´ë¦„ì„ ë°”ê¾¸ëŠ” ë°©ì‹ìœ¼ë¡œ ë°ì´í„° ìœ ì‹¤ì„ ë°©ì§€í•©ë‹ˆë‹¤.

ë¹ ë¥¸ ëª¨ë“ˆ êµì²´ë¥¼ ì‚¬ìš©í•  ë•Œ ì´ ê¸°ëŠ¥ì€ ìë™ íŒŒì¼ ë³€ê²½ ê°ì§€ë¥¼ ë§‰ì•„ë²„ë¦½ë‹ˆë‹¤. `safe write` ê¸°ëŠ¥ì„ ë¹„í™œì„±í™” í•˜ë ¤ë©´ ì•„ë˜ ì œì‹œëœ ë°©ë²•ì„ ì‚¬ìš©í•˜ì„¸ìš”.

- `Sublime Text 3` ì‚¬ìš©ì ì„¤ì •(user preferences)ì— `atomic_save: "false"` ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.
- `IntelliJ` ì„¤ì •(preferences)ì—ì„œ "safe write"ë¡œ ê²€ìƒ‰í•´ì„œ ì°¾ì€ ë’¤ ë¹„í™œì„±í™” í•˜ì„¸ìš”.
- `Vim` ì„¤ì •ì— `:set backupcopy=yes` ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.
- `WebStorm` Preferences > Appearance & Behavior > System Settings ë¡œ ê°€ì„œ `"safe write"`ì˜ ì²´í¬ë¥¼ í’€ì–´ë²„ë¦¬ì„¸ìš”.
